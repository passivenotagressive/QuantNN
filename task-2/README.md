# Задача 1

Формулировка задачи
------------

Классическая формулировка задачи TSP начинается с генерации следующей модели:

$$
\begin{cases}
			&\sum_{<i,j>} d_{ij} u_{ij} 
\end{cases}
$$
	
Где $d_{ij}$ матрица расстояний, $u_{ij}$ бинарная метка класса.\\
Эта модель учитывает только обход по всему графу, нам нужно учитывать автобусы и временной шаг.\\
Эмпирическим путем определяем бинарную метку класса трехмерным тензором $x_{buj} \in \{0,1\}$, где $b$ --- итерация по автобусу, $u$ --- итерация по графу, $j$ --- итерация по такту. \\
Теперь наложим условия на бинарную метку согласно условиям задачи:
$$
		\begin{cases}
			&\sum_{uv} c_{uv} \sum_{bj} x_{buj} x_{bvj+1} \rightarrow min \\
			&\sum_{b} x_{buj} \leq 1, \forall u,j, u\neq0\\
			& \sum_{uj} x_{buj} b_u \leq 10, \forall b\\
			& \sum_{bj} x_{buj} b_u = b_u, \forall u\\
			& \sum_{u} x_{buj} = 1, \forall b,j\\
			& x_{b00} = x_{b0 15}
		\end{cases}
$$

Где $c_{uv}$ --- матрица расстояний, $b_u$ --- строка с экскурсиями.\\
Пояснение к условиям:
$$	
\begin{enumerate}
		\item Подсчет длины графа --- основная минимизация
		\item Условие на отсутствие автобусов в одной вершине
		\item ограничение на количество пассажиров в автобусе
		\item Условие на посещение всех достопримечательностей
		\item Условие на существование автобуса где-то в графе
		\item Условие на конец и начало на вокзале
\end{enumerate}
$$
Теперь возникает вопрос, как записать это в формате QUBO. Для этого мы будем использовать тензорные операции и преобразования без доказательств, ссылаясь на туториал с лекции про квантовых отжиг.